{"version":3,"sources":["../../src/lib/seo.ts","../../src/lib/format.ts"],"sourcesContent":["import type { Post } from '../types'\nimport { truncate } from './format'\n\nexport interface SeoValues {\n  title: string\n  description: string\n  keywords?: string | null\n  noIndex: boolean\n  ogImage?: string | null\n}\n\n/**\n * Get SEO values from a post with fallbacks\n */\nexport function getSeoValues(post: Post): SeoValues {\n  return {\n    title: post.seoTitle || post.title,\n    description: post.seoDescription || post.subtitle || truncate(post.markdown, 160),\n    keywords: post.seoKeywords,\n    noIndex: post.noIndex,\n    ogImage: post.ogImage,\n  }\n}\n","const MINUTE = 60_000, HOUR = 3_600_000, DAY = 86_400_000\n\n/**\n * Format a date as relative time (e.g., \"5m ago\", \"2h ago\", \"Yesterday\")\n */\nexport function formatRelativeTime(isoDate: string): string {\n  const date = new Date(isoDate)\n  const diffMs = Date.now() - date.getTime()\n  const mins = Math.floor(diffMs / MINUTE)\n  const hours = Math.floor(diffMs / HOUR)\n  const days = Math.floor(diffMs / DAY)\n  \n  if (mins < 1) return 'Just now'\n  if (mins < 60) return `${mins}m ago`\n  if (hours < 24) return `${hours}h ago`\n  if (days === 1) return 'Yesterday'\n  if (days < 7) return `${days}d ago`\n  return date.toLocaleDateString()\n}\n\n/**\n * Format a date for display\n */\nexport function formatDate(date: Date | string, options?: Intl.DateTimeFormatOptions): string {\n  const d = typeof date === 'string' ? new Date(date) : date\n  \n  const defaultOptions: Intl.DateTimeFormatOptions = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  }\n  \n  return d.toLocaleDateString('en-US', options || defaultOptions)\n}\n\n/**\n * Format saved time for display (e.g., \"just now\", \"5m ago\", \"2:30 PM\")\n */\nexport function formatSavedTime(date: Date): string {\n  const now = new Date()\n  const diffMs = now.getTime() - date.getTime()\n  const diffSecs = Math.floor(diffMs / 1000)\n  const diffMins = Math.floor(diffMs / MINUTE)\n  \n  // Show relative time for recent saves\n  if (diffSecs < 10) return 'just now'\n  if (diffSecs < 60) return `${diffSecs}s ago`\n  if (diffMins < 60) return `${diffMins}m ago`\n  \n  // Show clock time for today\n  const isToday = date.toDateString() === now.toDateString()\n  if (isToday) {\n    return date.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' })\n  }\n  \n  return date.toLocaleDateString('en-US', { \n    month: 'short', \n    day: 'numeric',\n    hour: 'numeric',\n    minute: '2-digit',\n  })\n}\n\n/**\n * Count words in text\n */\nexport function countWords(text?: string | null): number {\n  if (!text) return 0\n  return text.split(/\\s+/).filter(Boolean).length\n}\n\n/**\n * Truncate text to a maximum length\n */\nexport function truncate(text: string, maxLength: number): string {\n  // Strip markdown formatting for description\n  const stripped = text\n    .replace(/#+\\s/g, '')\n    .replace(/\\*\\*/g, '')\n    .replace(/\\*/g, '')\n    .replace(/`/g, '')\n    .replace(/\\[([^\\]]+)\\]\\([^)]+\\)/g, '$1')\n    .replace(/\\n+/g, ' ')\n    .trim()\n  \n  if (stripped.length <= maxLength) return stripped\n  \n  return stripped.slice(0, maxLength - 3).trim() + '...'\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;AC0EO,SAAS,SAAS,MAAc,WAA2B;AAEhE,QAAM,WAAW,KACd,QAAQ,SAAS,EAAE,EACnB,QAAQ,SAAS,EAAE,EACnB,QAAQ,OAAO,EAAE,EACjB,QAAQ,MAAM,EAAE,EAChB,QAAQ,0BAA0B,IAAI,EACtC,QAAQ,QAAQ,GAAG,EACnB,KAAK;AAER,MAAI,SAAS,UAAU,UAAW,QAAO;AAEzC,SAAO,SAAS,MAAM,GAAG,YAAY,CAAC,EAAE,KAAK,IAAI;AACnD;;;AD1EO,SAAS,aAAa,MAAuB;AAClD,SAAO;AAAA,IACL,OAAO,KAAK,YAAY,KAAK;AAAA,IAC7B,aAAa,KAAK,kBAAkB,KAAK,YAAY,SAAS,KAAK,UAAU,GAAG;AAAA,IAChF,UAAU,KAAK;AAAA,IACf,SAAS,KAAK;AAAA,IACd,SAAS,KAAK;AAAA,EAChB;AACF;","names":[]}